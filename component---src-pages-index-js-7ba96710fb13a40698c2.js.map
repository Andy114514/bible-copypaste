{"version":3,"sources":["webpack:///./src/components/Quote.jsx","webpack:///./src/config/bible.js","webpack:///./src/pages/index.js"],"names":["Quote","snippetId","title","template","placeholder","React","useState","res","Array","from","matchAll","set","Set","map","matchRes","label","value","reduce","curr","has","add","extractPlaceHolder","placeHolders","setPlaceHolders","handleFieldUpdate","useCallback","newValue","handleCopy","range","document","createRange","selectNode","querySelector","window","getSelection","addRange","execCommand","removeAllRanges","err","console","error","className","partialTemplate","placeHolderRegex","RegExp","replaceAll","replacePlaceHolder","onClick","key","htmlFor","type","name","onChange","e","target","bible","id","Home"],"mappings":"2LAmCA,IAwEeA,EAxED,SAAC,GAAiD,IAA/CC,EAA8C,EAA9CA,UAAWC,EAAmC,EAAnCA,MAAOC,EAA4B,EAA5BA,SAA4B,KAAlBC,YACHC,IAAMC,SA9BhD,SAA4BH,GAC1B,IACMI,EAAMC,MAAMC,KAAKN,EAASO,SADP,wBAEnBC,EAAM,IAAIC,IAChB,OAAOL,EACJM,KAAI,SAAAC,GAAQ,MAAK,CAChBC,MAAOD,EAAS,GAChBE,MAAOF,EAAS,OAEjBG,QAAO,SAACV,EAAKW,GACZ,OAAIP,EAAIQ,IAAID,EAAKH,OACRR,GAETI,EAAIS,IAAIF,EAAKH,OACP,GAAN,mBAAWR,GAAX,CAAgBW,OACf,IAgBHG,CAAmBlB,KADdmB,EADsD,KACxCC,EADwC,KAW7D,IAAMC,EAAoBnB,IAAMoB,aAAY,SAACV,EAAOW,GAClDH,EACED,EAAaT,KAAI,SAAAT,GACf,OAAIA,EAAYW,QAAUA,EACjB,CACLA,MAAOX,EAAYW,MACnBC,MAAOU,GAGJtB,SAKPuB,EAAatB,IAAMoB,aAAY,WACnC,IAAMG,EAAQC,SAASC,cACvBF,EAAMG,WAAWF,SAASG,cAAT,IAA2B/B,EAA3B,YACjBgC,OAAOC,eAAeC,SAASP,GAE/B,IACEC,SAASO,YAAY,QACrBH,OAAOC,eAAeG,kBACtB,MAAOC,GACPC,QAAQC,MAAM,aAAcF,OAIhC,OACE,yBAAKG,UAAU,kCACb,wBAAIA,UAAU,aAAavC,GAC3B,uBAAGuC,UAAcxC,EAAL,WAnCPqB,EAAaL,QAAO,SAACyB,EAAD,GACzB,OAZN,SAA4BvC,EAAUY,EAAOC,GAC3C,IAAM2B,EAAmB,IAAIC,OAAJ,SAAoB7B,EAApB,YAAsC,KAC/D,OAAOZ,EAAS0C,WAAWF,EAAkB3B,GAUlC8B,CAAmBJ,EADsC,EAAnB3B,MAAmB,EAAZC,SAEnDb,IAkCD,6BACE,4BACEsC,UAAU,8CACVM,QAASpB,GAFX,OAOF,yBAAKc,UAAU,aACZnB,EAAaT,KAAI,YAAuB,IAApBE,EAAmB,EAAnBA,MAAOC,EAAY,EAAZA,MAC1B,OACE,yBAAKyB,UAAU,yBAAyBO,IAAKjC,GAC3C,2BAAOkC,QAASlC,GAAQA,GACxB,2BACE0B,UAAU,gEACVS,KAAK,OACLC,KAAMpC,EACNC,MAAOA,EACPoC,SAAU,SAAAC,GACR7B,EAAkBT,EAAOsC,EAAEC,OAAOtC,iBC3ErCuC,EArBD,CACZ,CACEC,GAAI,UACJtD,MAAO,KACPC,SACE,wHAEJ,CACEqD,GAAI,SACJtD,MAAO,KACPC,SACE,kIAEJ,CACEqD,GAAI,WACJtD,MAAO,MACPC,SACE,4KCbS,SAASsD,IACtB,OACE,yBAAKhB,UAAU,uBACZc,EAAM1C,KAAI,YAA8B,IAA3B2C,EAA0B,EAA1BA,GAAItD,EAAsB,EAAtBA,MAAOC,EAAe,EAAfA,SACvB,OACE,kBAAC,EAAD,CACE6C,IAAKQ,EACLvD,UAAWuD,EACXtD,MAAOA,EACPC,SAAUA","file":"component---src-pages-index-js-7ba96710fb13a40698c2.js","sourcesContent":["import React from \"react\"\n\n/**\n *\n * @param {string} template\n */\nfunction extractPlaceHolder(template) {\n  const placeHolderRegex = /\\$\\{(.*?)\\|(.*?)\\}/g\n  const res = Array.from(template.matchAll(placeHolderRegex))\n  const set = new Set()\n  return res\n    .map(matchRes => ({\n      label: matchRes[1],\n      value: matchRes[2],\n    }))\n    .reduce((res, curr) => {\n      if (set.has(curr.label)) {\n        return res\n      }\n      set.add(curr.label)\n      return [...res, curr]\n    }, [])\n}\n\n/**\n *\n * @param {string} template\n * @param {string} label\n * @param {string} value\n */\nfunction replacePlaceHolder(template, label, value) {\n  const placeHolderRegex = new RegExp(`\\\\$\\\\{${label}\\\\|.*?\\\\}`, \"g\")\n  return template.replaceAll(placeHolderRegex, value)\n}\n\nconst Quote = ({ snippetId, title, template, placeholder }) => {\n  const [placeHolders, setPlaceHolders] = React.useState(\n    extractPlaceHolder(template)\n  )\n\n  function renderResult() {\n    return placeHolders.reduce((partialTemplate, { label, value }) => {\n      return replacePlaceHolder(partialTemplate, label, value)\n    }, template)\n  }\n\n  const handleFieldUpdate = React.useCallback((label, newValue) => {\n    setPlaceHolders(\n      placeHolders.map(placeholder => {\n        if (placeholder.label === label) {\n          return {\n            label: placeholder.label,\n            value: newValue,\n          }\n        }\n        return placeholder\n      })\n    )\n  })\n\n  const handleCopy = React.useCallback(() => {\n    const range = document.createRange()\n    range.selectNode(document.querySelector(`.${snippetId}.result`))\n    window.getSelection().addRange(range)\n\n    try {\n      document.execCommand(\"copy\")\n      window.getSelection().removeAllRanges()\n    } catch (err) {\n      console.error(\"copy error\", err)\n    }\n  })\n\n  return (\n    <div className=\"shadow container p-5 space-y-2\">\n      <h3 className=\"font-bold\">{title}</h3>\n      <p className={`${snippetId} result`}>{renderResult()}</p>\n      <div>\n        <button\n          className=\"bg-green-500 px-2 py-1 text-white leading-4\"\n          onClick={handleCopy}\n        >\n          复制\n        </button>\n      </div>\n      <div className=\"space-y-2\">\n        {placeHolders.map(({ label, value }) => {\n          return (\n            <div className=\"grid grid-cols-1 gap-4\" key={label}>\n              <label htmlFor={label}>{label}</label>\n              <input\n                className=\"block w-full pl-7 pr-12 sm:text-sm border-gray-300 rounded-md\"\n                type=\"text\"\n                name={label}\n                value={value}\n                onChange={e => {\n                  handleFieldUpdate(label, e.target.value)\n                }}\n              ></input>\n            </div>\n          )\n        })}\n      </div>\n    </div>\n  )\n}\n\nexport default Quote\n","const bible = [\n  {\n    id: \"support\",\n    title: \"支援\",\n    template:\n      \"${支援者|桐生會長}，請您支援 #${被支援者|桐生ココ} ，她僅僅因為說${被支援者的主张|台灣是個國家}，就受${被支援者的反对者|中國五毛}機器人的攻擊以及人身威脅，和未婚夫${无关者|肖戰}的婚約也被迫取消，請一定聲援她！\",\n  },\n  {\n    id: \"nature\",\n    title: \"尿性\",\n    template:\n      \"依${反对者|五毛}的尿性，${声援者|蔡總統}的聲援反而會引來越多${反对者2|中國五毛}攻擊 #${被反对者|桐生ココ}，因為他們會說那是 #${被反对者|桐生ココ} 支持台獨的證據，對待${反对者|五毛}最好的方法是視若無睹或直接封鎖他們的帳號。\",\n  },\n  {\n    id: \"too-hard\",\n    title: \"太难了\",\n    template:\n      \"當${支援者的职业|台灣的總統}太難了，要考量的事太多了，也許${支援者的团体|蔡政府}有受到甚麼我們不知道的壓力，需要她立即表態，畢竟這麼我第一次對她的決定覺得不妥，不過或許這是她能夠當${支援者的职业|台灣的總統}，而我只能打個字發一發牢騷的原因。希望${支援者的称呼|蔡總統}發這個推文之前有和肖戰執政團隊溝通並取得他們的諒解。\",\n  },\n]\n\nexport default bible\n","import React from \"react\"\nimport Quote from \"../components/Quote\"\nimport bible from \"../config/bible\"\n\nexport default function Home() {\n  return (\n    <div className=\"container space-y-1\">\n      {bible.map(({ id, title, template }) => {\n        return (\n          <Quote\n            key={id}\n            snippetId={id}\n            title={title}\n            template={template}\n          ></Quote>\n        )\n      })}\n    </div>\n  )\n}\n"],"sourceRoot":""}